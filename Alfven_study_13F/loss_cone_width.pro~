pro loss_cone_width,alt
  
;SPENCE EDITS                                                                                                                                                
  
;**09/16/2014                                                                                                                                                
;OK, I think I see why this wasn't working. The original
;call                                                                                                
;to FA_FIELDS_COMBINE that I was using didn't include
;the                                                                                                    
;keyword /interp, and I suspect that was the issue. Over in the                                                                                              
;directory batch_jobs/playground1, there is a JOURNAL from 09162014                                                                                          
;that demonstrates the proper (I believe) usage of FA_FIELDS_COMBINE.                                                                                        
  
;**03/29/2014                                                                                                                                                
;*Getting an error when calculating 'proton_cyc_freq' (currently line                                                                                        
;265): Tag name Y is undefined for structure <Anonymous>.                                                                                                    
;**I'm not sure how to fix
;it...                                                                                                                             
  
;**Changes made 01/01/2014                                                                                                                                   
;*Replaced 'combinets' everywhere with 'FA_FIELDS_COMBINE'                                                                                                   
;*Edited call to FA_FIELDS_COMBINE--it used to be                                                                                                            
;efields_combine=FA_FIELDS_COMBINE({x:efieldV1214.time,y:efieldV1214.comp1},{x:efieldV58.time,y:efieldV58.comp1})                                            
;*Edited call to FA_FIELDS_COMBINE to align efield data with magz
;times.                                                                                     
;Variable utilized in program used to be fields, but I've
;replaced with efield_aligned                                                                       


;This program identifies Alfven waves and writes varous observable to
;a file names dflux_'orbit_number'_index.txt' from the size of
;the field-aligned curren\
t greater than som threshold value.                                                                                                                          
;Analysis of many orbits have shown this to be an effective way to
;find Alfven waves                                                                         
; the output quantities are described in the output file and in the
; txt of this pro.                                                                         
;to run load the data in sdt using the config alfven_stats_survey and
;then compile in the dircetory                                                          
;/disks/moose/home/ccc/Alfven_stats                                                                                                                          

;example from idl prompt: Alfven_Stats_3,/heavy,/analyse_noise                                                                                               
;the keyword heavy is set to get heavy ion data from teams                                                                                                   
; the keyword analyse noise is set to extract Alfven waves out of
;noisy b field data                                                                         

;Intended to be run in batch mode-to do this from terminal prompt
;type: sdt_batch alfven_stats_batch.txt        

;thresholds for inclusion as Alfven waves                                                                                                                    

current_threshold=1.0;microA/m^2                                                                                                                             
delta_b_threshold=5.0; nT                                                                                                                                    
delta_E_threshold=10.0 ; mV/m                                                                                                                                
esa_j_delta_bj_ratio_threshold=0.02
electron_eflux_ionos_threshold=0.05;ergs/cm^2/s                                                                                                              
eb_to_alfven_speed=10.0; factor by which the event can differ from model Alfven speed and still be called an Alfven wave                                     
;(applies only to the lower limit for e over b the upper limit is
;taken care of by the requiremenst that delta_b exceed 5 nT                                 


;energy ranges                   
